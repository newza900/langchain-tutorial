# ベストプラクティス

- 権限を制限する
    - アプリケーションに必要な範囲に権限を制限することで脆弱性を回避できる。read_onlyアクセスや機密リソースへのアクセス制限など
- 潜在的な誤用を予測する
    - 人と同じようにLLMも間違いを犯す。LLMに割り当てたシステム使用許可や資格情報は実際に使われることを想定する。例えば、資格情報を使ってデータベースからデータを消すことができる場合、これを割り当てたLLMが実際にデータを削除すると考えるのが最も安全
- 多層防御
    - 完璧なセキュリティ技術はない。ファインチューニングと適切なchainの設計によってLLMが間違いを犯す可能性を減らすことはできるが、ゼロにはできない。セキュリティの確保には単一層ではなく複数層のセキュリティアプローチを組み合わせるのが最善。例えば、read_onlyアクセスとサンドボックスの両方を使って、LLMが使用することが明示的に意図されているデータのみにアクセスできるようにする、など

## 緩和戦略を含むシナリオの例
- ユーザが、ファイルシステムへのアクセス権を持つエージェントに対して、消すべきでないファイルの削除や機密情報の閲覧を求める。緩和するためには、エージェントのアクセス権を特定のディレクトリのみに限定し、安全なファイルにのみ読み書きを許可する。エージェントをコンテナ内で動かすことでさらなるサンドボックス化を検討する。
- ユーザが、外部のAPIへの書き込み権限を持つエージェントに対して、APIに悪意のあるデータを書き込むように依頼する、またはAPIからデータを削除するように依頼する。緩和するためには、エージェントにAPIの読み込み権限のみを与える、またはそのような誤用に対して抵抗のあるエンドポイントだけを使うように制限する
- ユーザが、データベースへの資格情報を持つエージェントに対して、テーブルを削除するか、スキーマを変更するように依頼する。緩和するためには、エージェントがアクセスする必要のあるテーブルにのみアクセス権を持つように制限する。また、読み込み専用の資格情報を検討する